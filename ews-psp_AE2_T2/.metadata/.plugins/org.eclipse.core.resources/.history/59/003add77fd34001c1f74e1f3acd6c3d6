package psp.AE.AE2_T2;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class CalculadorProbabilidad {
	//atributos
	//constructores
	//getters y setters
	//métodos de interface
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		CalculadorProbabilidad probabilidad = new CalculadorProbabilidad();
		String nombreNEO = args[0];
		double posicion = Double.parseDouble(args[1]); //Ojo, el indice es 0 si no pasamos el nombre del Neo
		double velocidad = Double.parseDouble(args[2]); //Ojo, el indeice es 1 si no pasamos el nombre del Neo.
		double resultado = probabilidad.calcular(posicion, velocidad);
		System.out.println("Probalidad "+nombreNEO+" ("+resultado+"%): guardada en archivo.");
		probabilidad.guardarEnArchivo(nombreNEO, resultado);
	}
	
	//métodos de implementación	
	private Double calcular(double posicionNEO, double velocidadNEO) {
		double posicionTierra = 1;
		double velocidadTierra = 100;
		for (int i = 0; i < (50 * 365 * 24 * 60 * 60); i++) {
		posicionNEO = posicionNEO + velocidadNEO * i;
		posicionTierra = posicionTierra + velocidadTierra * i;
		}
		double resultado = 100 * Math.random() * Math.pow(((posicionNEO-posicionTierra)/(posicionNEO+posicionTierra)), 2);		
		return resultado;
	}

	private void guardarEnArchivo(String pNombreNEO, double pValorGuardar) {
		String nombreArchivo = "resultados"+File.separator+pNombreNEO+ ".txt";
		File directorio = new File("resultados");
		try {			
			FileWriter fr = new FileWriter(nombreArchivo);
			BufferedWriter br = new BufferedWriter(fr);
			br.write(String.valueOf(pValorGuardar));
			br.close();
			fr.close();			
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
